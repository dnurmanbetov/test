steps:
  - name: 'gcr.io/cloud-builders/docker'
    entrypoint: 'bash'
    args: [ '-c', 'docker login --username="_json_key" --password="$$PASSWORD" https://us-docker.pkg.dev' ]
    secretEnv: [ 'PASSWORD']

  - name: 'gcr.io/cloud-builders/git'
    secretEnv: [ 'SSH_KEY' ]
    entrypoint: 'bash'
    args:
      - -c
      - |
        echo "$$SSH_KEY" >> /root/.ssh/id_rsa
        chmod 400 /root/.ssh/id_rsa
        ssh-keyscan -t rsa github.com  >> /root/.ssh/known_hosts
    volumes:
      - name: 'ssh'
        path: /root/.ssh

  - id: 'branch name'
    name: us-docker.pkg.dev/pp-laravel-base-staging/base-images/inventcorp-circleci-image-8.2.3-fpm-nodejs-14:20230405T120340_74c74ec
    entrypoint: 'sh'
    args:
      - '-c'
      - |
        git clone git@github.com:inventcorp/base-front-end.git
    volumes:
      - name: 'ssh'
        path: /root/.ssh


  - id: 'branch name 2'
    name: us-docker.pkg.dev/pp-laravel-base-staging/base-images/inventcorp-circleci-image-8.2.3-fpm-nodejs-14:20230405T120340_74c74ec
    entrypoint: 'sh'
    args:
      - '-c'
      - |
        ls src -l
  - id: 'branch name 3'
    name: us-docker.pkg.dev/pp-laravel-base-staging/base-images/inventcorp-circleci-image-8.2.3-fpm-nodejs-14:20230405T120340_74c74ec
    entrypoint: 'sh'
    args:
      - '-c'
      - |
        ls src -l
  - id: 'branch name 4'
    name: us-docker.pkg.dev/pp-laravel-base-staging/base-images/inventcorp-circleci-image-8.2.3-fpm-nodejs-14:20230405T120340_74c74ec
    entrypoint: 'sh'
    args:
      - '-c'
      - |
        ls src -l
  - id: 'branch name 5'
    name: us-docker.pkg.dev/pp-laravel-base-staging/base-images/inventcorp-circleci-image-8.2.3-fpm-nodejs-14:20230405T120340_74c74ec
    entrypoint: 'sh'
    args:
      - '-c'
      - |
        ls src -l
availableSecrets:
  secretManager:
    - versionName: projects/710171056436/secrets/PASSWORD/versions/latest
      env: 'PASSWORD'
    - versionName: projects/710171056436/secrets/SSH_KEY/versions/latest
      env: 'SSH_KEY'